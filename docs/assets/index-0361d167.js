(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))w(n);new MutationObserver(n=>{for(const c of n)if(c.type==="childList")for(const s of c.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&w(s)}).observe(document,{childList:!0,subtree:!0});function a(n){const c={};return n.integrity&&(c.integrity=n.integrity),n.referrerPolicy&&(c.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?c.credentials="include":n.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function w(n){if(n.ep)return;n.ep=!0;const c=a(n);fetch(n.href,c)}})();let f=64,b=32,d=1;const k=document.createElement("canvas"),h=k.getContext("2d");let m=[];const S=(t,e)=>{d=e,k&&t.appendChild(k),k.width=f*d,k.height=b*d,m=new Array(f*b)},F=(t,e)=>{t>f?t-=f:t<0&&(t+=f),e>b?e-=b:e<0&&(e+=b);let a=t+e*f;return m[a]^=1,!m[a]},D=()=>{m=new Array(f*b)},B=()=>{if(h){h.clearRect(0,0,k.width,k.height);for(let t=0;t<f*b;t++){let e=t%f*d,a=Math.floor(t/f)*d;m[t]&&(h.fillStyle="#000",h.fillRect(e,a,d,d))}}},K={49:1,50:2,51:3,52:12,81:4,87:5,69:6,82:13,65:7,83:8,68:9,70:14,90:10,88:0,67:11,86:15},g=[];let p=null;const G=t=>{p=t},O=t=>g[t],V=({which:t})=>{console.log("keydown:",t);const e=K[t];console.log("key:",e),g[e]=!0,p!==null&&e&&(p(parseInt(e)),p=null)},Z=({which:t})=>{let e=K[t];g[e]=!1,console.log(g)};window.addEventListener("keydown",V,!1);window.addEventListener("keyup",Z,!1);const $=window.AudioContext||window.AudioContext;let y=new $,M=y.createGain(),j=y.destination,l;M.connect(j);const z=t=>{y&&!l&&(l=y.createOscillator(),l.frequency.setValueAtTime(t||440,y.currentTime),l.type="square",l.connect(M),l.start())},H=()=>{l&&(l.stop(),l.disconnect(),l=null)};let o=512;const T=new Array,r=new Uint8Array(16),i=new Uint8Array(4096);let u=0,x=0,A=0,L=!1,J=10,P=!1;const U=[240,144,144,144,240,32,96,32,32,112,240,16,240,128,240,240,16,240,16,240,144,144,240,16,16,240,128,240,16,240,240,128,240,144,240,240,16,32,64,64,240,144,240,144,240,240,144,240,16,240,240,144,240,144,144,224,144,224,144,224,240,128,128,128,240,224,144,144,144,224,240,128,240,128,240,240,128,240,128,128],Q=()=>{for(let t=0;t<U.length;t++)i[t]=U[t]},W=t=>{for(let e=0;e<t.length;e++)i[512+e]=t[e];Q(),P=!0},X=t=>{P=!1,fetch(t,{method:"GET"}).then(e=>e.arrayBuffer()).then(e=>{const a=new Uint8Array(e);W(a),P=!0}).catch(e=>console.log(e))},Y=()=>{if(!P)return!1;for(let t=0;t<J;t++)if(!L){let e=i[o]<<8|i[o+1];te(e)}L||_(),ee(),B()},_=()=>{x>0&&(x-=1),A>0&&(A-=1)},ee=()=>{A>0?z(440):H()},te=t=>{o+=2;let e=(t&3840)>>8,a=(t&240)>>4;switch(t&61440){case 0:switch(t){case 224:D();break;case 238:o=T.pop();break}break;case 4096:o=t&4095;break;case 8192:T.push(o),o=t&4095;break;case 12288:r[e]===(t&255)&&(o+=2);break;case 16384:r[e]!==(t&255)&&(o+=2);break;case 20480:r[e]===r[a]&&(o+=2);break;case 24576:r[e]=t&255;break;case 28672:r[e]+=t&255;break;case 32768:switch(t&15){case 0:r[e]=r[a];break;case 1:r[e]|=r[a];break;case 2:r[e]&=r[a];break;case 3:r[e]^=r[a];break;case 4:let s=r[e]+=r[a];r[15]=0,s>255&&(r[15]=1),r[e]=s;break;case 5:r[15]=0,r[e]>r[a]&&(r[15]=1),r[e]-=r[a];break;case 6:r[15]=r[e]&1,r[e]>>=1;break;case 7:r[15]=0,r[a]>r[e]&&(r[15]=1),r[e]=r[a]-r[e];break;case 14:r[15]=r[e]&128,r[e]<<=1;break}break;case 36864:r[e]!==r[a]&&(o+=2);break;case 40960:u=t&4095;break;case 45056:o=(t&4095)+r[0];break;case 49152:let w=Math.floor(Math.random()*255);r[e]=w&(t&255);break;case 53248:let n=8,c=t&15;r[15]=0;for(let s=0;s<c;s++){let v=i[u+s];for(let I=0;I<n;I++)(v&128)>0&&F(r[e]+I,r[a]+s)&&(r[15]=1),v<<=1}break;case 57344:switch(t&255){case 158:O(r[e])&&(o+=2);break;case 161:O(r[e])||(o+=2);break}break;case 61440:switch(t&255){case 7:r[e]=x;break;case 10:L=!0,G(s=>{console.log("next:",s),r[e]=s,L=!1});break;case 21:x=r[e];break;case 24:A=r[e];break;case 30:u+=r[e];break;case 41:u=r[e]*5;break;case 51:i[u]=r[e]/100,i[u+1]=r[e]%100/10,i[u+2]=r[e]%10;break;case 85:for(let s=0;s<=e;s++)i[u+s]=r[s];break;case 101:for(let s=0;s<=e;s++)r[s]=i[u+s];break}break;default:throw new Error("Unknown opcode "+t)}};let q,C,N,E;const R=()=>{C=Date.now(),E=C-N,E>q&&Y(),requestAnimationFrame(R)},re=(t,e,a=60)=>{S(document.querySelector(t),e),q=1e3/a,N=Date.now(),R()},se=t=>{X(t)};re("#app",1);se("./roms/BLITZ");
